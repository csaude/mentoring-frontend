import{Q as D,g as h,l as Cl,m as Ge,n as $l,a as _l}from"./QBtn.bc754139.js";import{Q as W,u as pe}from"./dialog.985b2618.js";import{b as ke,c as Y,a as T,d as qe,e as re,u as Je,Q as Ee}from"./loading.39fe8a47.js";import{Q as Ce}from"./QFab.c21d428a.js";import{Q as $e}from"./QPageSticky.692f4600.js";import{p as de,a as ve}from"./programmaticAreaService.1f7a5697.js";import{b as oe,U as ie,e as Le,g as Vl,k as Pl,l as Sl,R as Al,m as Rl,E as Re,L as he,Q as Me,u as Oe}from"./QSpinnerRings.4e4bdf31.js";import{r as c,o as ce,U as d,af as S,X as n,f as e,W as l,Y as X,_ as A,V as G,$ as B,z as Ke,c as x,w as Ue,h as Ve,g as We,a3 as Ul,i as we,A as _e,E as Fl,H as hl,F as xe,a0 as Pe,G as Ne,aB as be}from"./index.8cc0be75.js";import{b as ge,d as ye,Q as fe}from"./selection.524514e5.js";import{u as xl,a as Nl,c as Ye,d as ze}from"./index.806c5219.js";import{d as zl}from"./format.2d67676e.js";import{q as Xe,b as ue,u as El}from"./questionCategoryService.240c6402.js";import{b as me,h as ne,p as Ze,d as el,a as ae}from"./professionalCategoryService.4e4f2e8e.js";import{h as Ol,i as Dl}from"./QCheckbox.435b6968.js";import{Q as ll,_ as al}from"./mentoring.31b55a37.js";import{Q as ol}from"./QBanner.7f8ff127.js";import{u as Il}from"./stringUtils.75fc7862.js";import"./_commonjsHelpers.468b0bfa.js";import"./axios.0ed95acd.js";const Tl={class:"q-pt-sm",style:{height:"100%"}},Ql={class:"q-ma-md q-pa-md page-container"},Gl={class:"full-width row flex-center text-primary q-gutter-sm text-body2"},Ll={key:0},Hl={key:1},Bl={key:0},jl={key:1},Jl={class:"col"},Ml={key:0},Kl={key:1},Wl={__name:"Programs",setup(s){const{alertError:I,alertSucess:r,alertWarningAction:g}=pe(),R=c([]),v=c(""),C=c(!1),m=c({name:"",description:""}),y=c(!1),z=[{name:"name",align:"left",label:"Nome",sortable:!1},{name:"description",align:"left",label:"Descri\xE7\xE3o",sortable:!1},{name:"options",align:"left",label:"Op\xE7\xF5es",sortable:!1}],_=c(new oe);ce(()=>{_.value=JSON.parse(JSON.stringify(ie.getLogedUser())),R.value=de.piniaGetAll()});const J=()=>{const q={name:m.value.name,description:m.value.description};de.saveProgram(q).then(o=>{C.value=!1,R.value=de.piniaGetAll()})},N=()=>{E(),k(),y.value=!1},L=q=>{k(),y.value=!1,v.value=q,m.value=q},Q=()=>{const q={id:v.value.id,name:m.value.name,description:m.value.description};de.updateProgram(q).then(o=>{R.value=de.piniaGetAll(),E()})},E=()=>{v.value={},m.value={name:"",description:""}},j=q=>{v.value=q,g("Tem certeza que deseja apagar o programa?").then(o=>{o?de.deleteProgram(v.value).then(a=>{a.status===200||esponse.status===201?r("Programa apagado com sucesso!").then(i=>{de.getAll().then(V=>{R.value=de.piniaGetAll()})}):I("N\xE3o foi possivel apagar o programa.")}).catch(a=>{console.error(a)}):console.info("OK. the Item Has not removed")})},b=()=>{if(E(),y.value=!0,C.value)I("H\xE1 uma \xE1rea sendo associado.");else{C.value=!0;const q={id:null,program:{name:null,description:null},acao:"NOVA_LINHA"};R.value.unshift(q)}},k=()=>{if(y.value==!0){const q=R.value.findIndex(o=>o.id===null);R.value.splice(q,1),C.value=!1}};return(q,o)=>(d(),S("div",Tl,[n("div",Ql,[n("div",null,[e(qe,{class:"col",dense:"",rows:R.value,columns:z,"row-key":"id",filter:q.filter},{"no-data":l(({icon:a,filter:i})=>[n("div",Gl,[o[6]||(o[6]=n("span",null," Sem resultados para visualizar ",-1)),e(D,{size:"2em",name:i?"filter_b_and_w":a},null,8,["name"])])]),body:l(a=>[e(ke,{props:a},{default:l(()=>[e(Y,{key:"name",props:a},{default:l(()=>[a.row.id===null||v.value.id===a.row.id?(d(),S("span",Ll,[e(W,{outlined:"",label:"Nome",dense:"",ref:"nameRef",class:"col",modelValue:m.value.name,"onUpdate:modelValue":o[1]||(o[1]=i=>m.value.name=i)},{append:l(()=>[e(D,{name:"close",onClick:o[0]||(o[0]=i=>m.value.name=""),class:"cursor-pointer"})]),_:1},8,["modelValue"])])):(d(),S("span",Hl,X(a.row.name),1))]),_:2},1032,["props"]),e(Y,{key:"description",props:a},{default:l(()=>[a.row.id===null||v.value.id===a.row.id?(d(),S("span",Bl,[e(W,{outlined:"",label:"Descri\xE7\xE3o",dense:"",ref:"descriptionRef",class:"col q-ml-md",modelValue:m.value.description,"onUpdate:modelValue":o[3]||(o[3]=i=>m.value.description=i)},{append:l(()=>[e(D,{name:"close",onClick:o[2]||(o[2]=i=>m.value.description=""),class:"cursor-pointer"})]),_:1},8,["modelValue"])])):(d(),S("span",jl,X(a.row.description),1))]),_:2},1032,["props"]),e(Y,{key:"options",props:a},{default:l(()=>[n("div",Jl,[a.row.id===null?(d(),S("span",Ml,[e(h,{onClick:J,class:"q-ml-md q-mb-xs float-right",square:"",color:"primary",icon:"save"},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>o[7]||(o[7]=[A("Salvar")])),_:1})]),_:1}),e(h,{onClick:N,class:"q-ml-md q-mb-xs float-right",square:"",color:"amber",icon:"close"},{default:l(()=>[e(T,{class:"bg-amber-5"},{default:l(()=>o[8]||(o[8]=[A("Fechar")])),_:1})]),_:1})])):(d(),S("span",Kl,[v.value.id!==a.row.id?(d(),G(h,{key:0,flat:"",round:"",class:"q-ml-md",color:"green-8",icon:"edit",onClick:i=>L(a.row)},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>o[9]||(o[9]=[A("Detalhar/Editar Program")])),_:1})]),_:2},1032,["onClick"])):B("",!0),v.value.id===a.row.id?(d(),G(h,{key:1,flat:"",round:"",class:"q-ml-md",color:"green-8",icon:"done",onClick:i=>Q(a.row)},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>o[10]||(o[10]=[A("Guardar Altera\xE7\xE3o")])),_:1})]),_:2},1032,["onClick"])):B("",!0),v.value.id===a.row.id?(d(),G(h,{key:2,flat:"",round:"",class:"q-ml-md",color:"red-8",icon:"close",onClick:o[4]||(o[4]=i=>E())},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>o[11]||(o[11]=[A("Descartar Altera\xE7\xE3o")])),_:1})]),_:1})):B("",!0),v.value.id!==a.row.id?(d(),G(h,{key:3,flat:"",round:"",class:"q-ml-md",color:"red-8",icon:"delete",onClick:i=>j(a.row.id)},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>o[12]||(o[12]=[A("Apagar Program")])),_:1})]),_:2},1032,["onClick"])):B("",!0)]))])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","filter"])]),e($e,{position:"bottom-right",offset:[20,30],class:"row"},{default:l(()=>[e(Ce,{color:"primary",glossy:"",icon:"add",onClick:o[5]||(o[5]=a=>b())})]),_:1})])]))}};function Ae(s,I){return[!0,!1].includes(s)?s:I}var De=Ke({name:"QPagination",props:{...xl,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:s=>(typeof s=="string"?parseInt(s,10):s)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:s=>s===""||Cl.includes(s)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(s,{emit:I}){const{proxy:r}=We(),{$q:g}=r,R=Nl(s,g),v=x(()=>parseInt(s.min,10)),C=x(()=>parseInt(s.max,10)),m=x(()=>parseInt(s.maxPages,10)),y=x(()=>Q.value+" / "+C.value),z=x(()=>Ae(s.boundaryLinks,s.input)),_=x(()=>Ae(s.boundaryNumbers,!s.input)),J=x(()=>Ae(s.directionLinks,s.input)),N=x(()=>Ae(s.ellipses,!s.input)),L=c(null),Q=x({get:()=>s.modelValue,set:f=>{if(f=parseInt(f,10),s.disable||isNaN(f))return;const U=zl(f,v.value,C.value);s.modelValue!==U&&I("update:modelValue",U)}});Ue(()=>`${v.value}|${C.value}`,()=>{Q.value=s.modelValue});const E=x(()=>"q-pagination row no-wrap items-center"+(s.disable===!0?" disabled":"")),j=x(()=>s.gutter in Ge?`${Ge[s.gutter]}px`:s.gutter||null),b=x(()=>j.value!==null?`--q-pagination-gutter-parent:-${j.value};--q-pagination-gutter-child:${j.value}`:null),k=x(()=>{const f=[s.iconFirst||g.iconSet.pagination.first,s.iconPrev||g.iconSet.pagination.prev,s.iconNext||g.iconSet.pagination.next,s.iconLast||g.iconSet.pagination.last];return g.lang.rtl===!0?f.reverse():f}),q=x(()=>({"aria-disabled":s.disable===!0?"true":"false",role:"navigation"})),o=x(()=>$l(s,"flat")),a=x(()=>({[o.value]:!0,round:s.round,rounded:s.rounded,padding:s.padding,color:s.color,textColor:s.textColor,size:s.size,ripple:s.ripple!==null?s.ripple:!0})),i=x(()=>{const f={[o.value]:!1};return s.activeDesign!==""&&(f[s.activeDesign]=!0),f}),V=x(()=>({...i.value,color:s.activeColor||s.color,textColor:s.activeTextColor||s.textColor})),p=x(()=>{let f=Math.max(m.value,1+(N.value?2:0)+(_.value?2:0));const U={pgFrom:v.value,pgTo:C.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(C.value).length)}em`}};return m.value&&f<C.value-v.value+1&&(f=1+Math.floor(f/2)*2,U.pgFrom=Math.max(v.value,Math.min(C.value-f+1,s.modelValue-Math.floor(f/2))),U.pgTo=Math.min(C.value,U.pgFrom+f-1),_.value&&(U.boundaryStart=!0,U.pgFrom++),N.value&&U.pgFrom>v.value+(_.value?1:0)&&(U.ellipsesStart=!0,U.pgFrom++),_.value&&(U.boundaryEnd=!0,U.pgTo--),N.value&&U.pgTo<C.value-(_.value?1:0)&&(U.ellipsesEnd=!0,U.pgTo--)),U});function $(f){Q.value=f}function ee(f){Q.value=Q.value+f}const M=x(()=>{function f(){Q.value=L.value,L.value=null}return{"onUpdate:modelValue":U=>{L.value=U},onKeyup:U=>{Ul(U,13)===!0&&f()},onBlur:f}});function w(f,U,te){const se={"aria-label":U,"aria-current":"false",...a.value,...f};return te===!0&&Object.assign(se,{"aria-current":"true",...V.value}),U!==void 0&&(s.toFn!==void 0?se.to=s.toFn(U):se.onClick=()=>{$(U)}),Ve(h,se)}return Object.assign(r,{set:$,setByOffset:ee}),()=>{const f=[],U=[];let te;if(z.value===!0&&(f.push(w({key:"bls",disable:s.disable||s.modelValue<=v.value,icon:k.value[0]},v.value)),U.unshift(w({key:"ble",disable:s.disable||s.modelValue>=C.value,icon:k.value[3]},C.value))),J.value===!0&&(f.push(w({key:"bdp",disable:s.disable||s.modelValue<=v.value,icon:k.value[1]},s.modelValue-1)),U.unshift(w({key:"bdn",disable:s.disable||s.modelValue>=C.value,icon:k.value[2]},s.modelValue+1))),s.input!==!0){te=[];const{pgFrom:se,pgTo:H,marginalStyle:P}=p.value;if(p.value.boundaryStart===!0){const O=v.value===s.modelValue;f.push(w({key:"bns",style:P,disable:s.disable,label:v.value},v.value,O))}if(p.value.boundaryEnd===!0){const O=C.value===s.modelValue;U.unshift(w({key:"bne",style:P,disable:s.disable,label:C.value},C.value,O))}p.value.ellipsesStart===!0&&f.push(w({key:"bes",style:P,disable:s.disable,label:"\u2026",ripple:!1},se-1)),p.value.ellipsesEnd===!0&&U.unshift(w({key:"bee",style:P,disable:s.disable,label:"\u2026",ripple:!1},H+1));for(let O=se;O<=H;O++)te.push(w({key:`bpg${O}`,style:P,disable:s.disable,label:O},O,O===s.modelValue))}return Ve("div",{class:E.value,...q.value},[Ve("div",{class:"q-pagination__content row no-wrap items-center",style:b.value},[...f,s.input===!0?Ve(W,{class:"inline",style:{width:`${y.value.length/1.5}em`},type:"number",dense:!0,value:L.value,disable:s.disable,dark:R.value,borderless:!0,inputClass:s.inputClass,inputStyle:s.inputStyle,placeholder:y.value,min:v.value,max:C.value,...M.value}):Ve("div",{class:"q-pagination__middle row justify-center"},te),...U])])}}}),Ie=Ke({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(s,{slots:I}){const{proxy:{$q:r}}=We(),g=we(Fl,_e);if(g===_e)return console.error("QPage needs to be a deep child of QLayout"),_e;if(we(hl,_e)===_e)return console.error("QPage needs to be child of QPageContainer"),_e;const v=x(()=>{const m=(g.header.space===!0?g.header.size:0)+(g.footer.space===!0?g.footer.size:0);if(typeof s.styleFn=="function"){const y=g.isContainer.value===!0?g.containerHeight.value:r.screen.height;return s.styleFn(m,y)}return{minHeight:g.isContainer.value===!0?g.containerHeight.value-m+"px":r.screen.height===0?m!==0?`calc(100vh - ${m}px)`:"100vh":r.screen.height-m+"px"}}),C=x(()=>`q-page${s.padding===!0?" q-layout-padding":""}`);return()=>Ve("main",{class:C.value,style:v.value},_l(I.default))}});const Yl={class:"q-pt-sm",style:{height:"100%"}},Xl={class:"q-ma-md q-pa-md page-container"},Zl={class:"full-width row flex-center text-primary q-gutter-sm text-body2"},ea={key:0},la={key:1},aa={key:0},oa={key:1},ta={key:0},sa={key:1},na={class:"col"},ra={key:0},ia={key:1},ua={style:{float:"right"},class:"q-mt-md"},da={__name:"Questions",emits:["goToQuestioningAreas"],setup(s,{emit:I}){const{createQuestionFromDTO:r}=El(),{alertError:g,alertSucess:R,alertWarningAction:v}=pe();we("step");const C=c([]),m=c(""),y=c(!1),z=c(!1),_=c({code:"",question:"",questionCategory:""}),J=[{name:"code",align:"left",label:"C\xF3digo",sortable:!1},{name:"question",align:"left",label:"Compet\xEAncia",sortable:!1},{name:"questionCategory",align:"left",label:"Categoria",sortable:!1},{name:"options",align:"left",label:"Op\xE7\xF5es",sortable:!1}],N=c(new oe),L=c(!0),Q=c({page:1,rowsPerPage:10,rowsNumber:0}),E=M=>{Q.value.page=M.pagination.page,Q.value.rowsPerPage=M.pagination.rowsPerPage,$()};ce(()=>{N.value=JSON.parse(JSON.stringify(ie.getLogedUser())),$()});const j=x(()=>Xe.piniaGetAll()),b=()=>{const M={code:_.value.code,question:_.value.question,questionCategory:_.value.questionCategory};ue.saveQuestion(M).then(w=>{z.value=!1,ue.getAll().then(()=>{C.value=ue.piniaGetAll()})})},k=()=>{_.value.code="",_.value.question="",_.value.questionCategory="",p()},q=M=>{p(),m.value=M,_.value=M},o=()=>{const M={id:m.value.id,code:_.value.code,question:_.value.question,questionCategory:_.value.questionCategory};ue.updateQuestion(M).then(w=>{C.value=ue.piniaGetAll(),a()})},a=()=>{m.value={},_.value={code:"",description:""}},i=M=>{v("Tem certeza que deseja apagar o questiona?").then(w=>{w?ue.deleteQuestion(M).then(f=>{f.status===200||f.status===201?R("Question apagada com sucesso!").then(U=>{ue.getAll().then(te=>{C.value=ue.piniaGetAll()})}):g("N\xE3o foi possivel apagar o questiona.")}).catch(f=>{console.error(f)}):console.info("OK. the Item Has not removed")})},V=()=>{if(a(),y.value=!0,z.value)g("H\xE1 uma \xE1rea sendo associado.");else{z.value=!0;const M={id:null,question:{code:null,question:null,questionCategory:null},acao:"NOVA_LINHA"};C.value.unshift(M)}},p=()=>{if(y.value==!0){const M=C.value.findIndex(w=>w.id===null);C.value.splice(M,1),z.value=!1}},$=()=>{L.value=!0,ee()},ee=async()=>{const M={page:Q.value.page-1,size:Q.value.rowsPerPage};Object.keys(M).forEach(w=>M[w]===""&&delete M[w]),ue.getAll(M).then(w=>{C.value=[],console.log(w),w.data.content.forEach(f=>{C.value.push(r(f))}),Q.value.rowsNumber=w.data.totalPages}).catch(w=>{console.error(w)}).finally(()=>{L.value=!1})};return Ue(()=>Q.value.page,M=>{$()}),(M,w)=>(d(),G(Ie,null,{default:l(()=>[n("div",Yl,[n("div",Xl,[n("div",null,[e(qe,{class:"row",dense:"",rows:C.value,columns:J,"row-key":"id",filter:M.filter,pagination:Q.value,"onUpdate:pagination":w[6]||(w[6]=f=>Q.value=f),loading:L.value,onRequest:E},{"no-data":l(({icon:f,filter:U})=>[n("div",Zl,[w[9]||(w[9]=n("span",null," Sem resultados para visualizar ",-1)),e(D,{size:"2em",name:U?"filter_b_and_w":f},null,8,["name"])])]),body:l(f=>[e(ke,{props:f},{default:l(()=>[e(Y,{key:"code",props:f},{default:l(()=>[f.row.id===null||m.value.id===f.row.id?(d(),S("span",ea,[e(W,{outlined:"",label:"C\xF3digo",dense:"",ref:"codeRef",class:"col",modelValue:_.value.code,"onUpdate:modelValue":w[1]||(w[1]=U=>_.value.code=U)},{append:l(()=>[e(D,{name:"close",onClick:w[0]||(w[0]=U=>_.value.code=""),class:"cursor-pointer"})]),_:1},8,["modelValue"])])):(d(),S("span",la,X(f.row.code),1))]),_:2},1032,["props"]),e(Y,{key:"question",props:f},{default:l(()=>[f.row.id===null||m.value.id===f.row.id?(d(),S("span",aa,[e(W,{outlined:"",label:"Compet\xEAncia",dense:"",ref:"questionRef",class:"col q-ml-md",modelValue:_.value.question,"onUpdate:modelValue":w[3]||(w[3]=U=>_.value.question=U)},{append:l(()=>[e(D,{name:"close",onClick:w[2]||(w[2]=U=>_.value.question=""),class:"cursor-pointer"})]),_:1},8,["modelValue"])])):(d(),S("span",oa,X(f.row.question),1))]),_:2},1032,["props"]),e(Y,{key:"questionCategory",props:f},{default:l(()=>[f.row.id===null||m.value.id===f.row.id?(d(),S("span",ta,[e(re,{class:"col","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",dense:"",outlined:"",ref:"questionCategoryRef","lazy-rules":"",modelValue:_.value.questionCategory,"onUpdate:modelValue":w[4]||(w[4]=U=>_.value.questionCategory=U),options:j.value,"option-value":"id","option-label":"category",label:"Categoria"},{"no-option":l(()=>[e(ge,null,{default:l(()=>[e(ye,{class:"text-grey"},{default:l(()=>w[10]||(w[10]=[A(" Sem Resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options"])])):(d(),S("span",sa,X(f.row.questionCategory.category),1))]),_:2},1032,["props"]),e(Y,{key:"options",props:f},{default:l(()=>[n("div",na,[f.row.id===null?(d(),S("span",ra,[e(h,{onClick:b,class:"q-ml-md q-mb-xs float-right",square:"",color:"primary",icon:"save"},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>w[11]||(w[11]=[A("Salvar")])),_:1})]),_:1}),e(h,{onClick:k,class:"q-ml-md q-mb-xs float-right",square:"",color:"amber",icon:"close"},{default:l(()=>[e(T,{class:"bg-amber-5"},{default:l(()=>w[12]||(w[12]=[A("Fechar")])),_:1})]),_:1})])):(d(),S("span",ia,[m.value.id!==f.row.id?(d(),G(h,{key:0,flat:"",round:"",class:"q-ml-md",color:"green-8",icon:"edit",onClick:U=>q(f.row)},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>w[13]||(w[13]=[A("Detalhar/Editar Compet\xEAncia")])),_:1})]),_:2},1032,["onClick"])):B("",!0),m.value.id===f.row.id?(d(),G(h,{key:1,flat:"",round:"",class:"q-ml-md",color:"green-8",icon:"done",onClick:U=>o(f.row)},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>w[14]||(w[14]=[A("Guardar Altera\xE7\xE3o")])),_:1})]),_:2},1032,["onClick"])):B("",!0),m.value.id===f.row.id?(d(),G(h,{key:2,flat:"",round:"",class:"q-ml-md",color:"red-8",icon:"close",onClick:w[5]||(w[5]=U=>a())},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>w[15]||(w[15]=[A("Descartar Altera\xE7\xE3o")])),_:1})]),_:1})):B("",!0),m.value.id!==f.row.id?(d(),G(h,{key:3,flat:"",round:"",class:"q-ml-md",color:"red-8",icon:"delete",onClick:U=>i(f.row.id)},null,8,["onClick"])):B("",!0)]))])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","filter","pagination","loading"])]),n("div",ua,[e(De,{modelValue:Q.value.page,"onUpdate:modelValue":w[7]||(w[7]=f=>Q.value.page=f),max:Q.value.rowsNumber,"boundary-numbers":"","direction-links":"",color:"primary"},null,8,["modelValue","max"])]),e($e,{position:"bottom-right",offset:[20,30],class:"row"},{default:l(()=>[e(Ce,{color:"primary",glossy:"",icon:"add",onClick:w[8]||(w[8]=f=>V())})]),_:1})])])]),_:1}))}},ma={class:"q-pt-sm",style:{height:"100%"}},ca={class:"q-ma-md q-pa-md page-container"},va={class:"full-width row flex-center text-primary q-gutter-sm text-body2"},fa={key:0},pa={key:1},ga={key:0},ya={key:1},ba={key:0},wa={key:1},ka={key:0},qa={key:1},Ca={class:"col"},$a={key:0},_a={key:1},Va={__name:"ProgrammaticAreas",setup(s){const{alertError:I,alertSucess:r,alertWarningAction:g}=pe(),R=c([]),v=c(""),C=c(!1),m=c({code:"",name:"",description:"",program:""}),y=c(!1),z=[{name:"code",align:"left",label:"C\xF3digo",sortable:!1},{name:"name",align:"left",label:"Nome",sortable:!1},{name:"description",align:"left",label:"Descri\xE7\xE3o",sortable:!1},{name:"program",align:"left",label:"Programa",sortable:!1},{name:"options",align:"left",label:"Op\xE7\xF5es",sortable:!1}],_=c(new oe);ce(()=>{_.value=JSON.parse(JSON.stringify(ie.getLogedUser())),R.value=ve.piniaGetAll()});const J=x(()=>de.piniaGetAll()),N=()=>{const o={code:m.value.code,name:m.value.name,description:m.value.description,program:m.value.program};ve.saveProgrammaticArea(o).then(a=>{R.value=ve.piniaGetAll(),C.value=!1})},L=()=>{j(),q(),y.value=!1},Q=o=>{q(),y.value=!1,v.value=o,m.value=o},E=()=>{const o={id:v.value.id,code:m.value.code,name:m.value.name,description:m.value.description,program:m.value.program};ve.updateProgrammaticArea(o).then(a=>{R.value=ve.piniaGetAll(),j()})},j=()=>{v.value={},m.value={code:"",name:"",description:"",program:""}},b=o=>{g("Tem certeza que deseja apagar o ProgrammaticAreaa?").then(a=>{a?ve.deleteProgrammaticArea(o).then(i=>{i.status===200||esponse.status===201?r("ProgrammaticArea apagado com sucesso!").then(V=>{ve.getAll().then(p=>{R.value=ve.piniaGetAll()})}):I("N\xE3o foi possivel apagar o ProgrammaticAreaa.")}).catch(i=>{console.error(i)}):console.info("OK. the Item Has not removed")})},k=()=>{if(j(),y.value=!0,C.value)I("H\xE1 uma \xE1rea sendo associado.");else{C.value=!0;const o={id:null,programmaticArea:{code:null,name:null,description:null,program:null},acao:"NOVA_LINHA"};R.value.unshift(o)}},q=()=>{if(y.value==!0){const o=R.value.findIndex(a=>a.id===null);R.value.splice(o,1),C.value=!1}};return(o,a)=>(d(),S("div",ma,[n("div",ca,[n("div",null,[e(qe,{class:"col",dense:"",rows:R.value,columns:z,"row-key":"id",filter:o.filter},{"no-data":l(({icon:i,filter:V})=>[n("div",va,[a[9]||(a[9]=n("span",null," Sem resultados para visualizar ",-1)),e(D,{size:"2em",name:V?"filter_b_and_w":i},null,8,["name"])])]),body:l(i=>[e(ke,{props:i},{default:l(()=>[e(Y,{key:"code",props:i},{default:l(()=>[i.row.id===null||v.value.id===i.row.id?(d(),S("span",fa,[e(W,{outlined:"",label:"Code",dense:"",ref:"codeRef",class:"col",modelValue:m.value.code,"onUpdate:modelValue":a[1]||(a[1]=V=>m.value.code=V)},{append:l(()=>[e(D,{name:"close",onClick:a[0]||(a[0]=V=>m.value.code=""),class:"cursor-pointer"})]),_:1},8,["modelValue"])])):(d(),S("span",pa,X(i.row.code),1))]),_:2},1032,["props"]),e(Y,{key:"name",props:i},{default:l(()=>[i.row.id===null||v.value.id===i.row.id?(d(),S("span",ga,[e(W,{outlined:"",label:"Nome",dense:"",ref:"nameRef",class:"col",modelValue:m.value.name,"onUpdate:modelValue":a[3]||(a[3]=V=>m.value.name=V)},{append:l(()=>[e(D,{name:"close",onClick:a[2]||(a[2]=V=>m.value.name=""),class:"cursor-pointer"})]),_:1},8,["modelValue"])])):(d(),S("span",ya,X(i.row.name),1))]),_:2},1032,["props"]),e(Y,{key:"description",props:i},{default:l(()=>[i.row.id===null||v.value.id===i.row.id?(d(),S("span",ba,[e(W,{outlined:"",label:"Descri\xE7\xE3o",dense:"",ref:"descriptionRef",class:"col q-ml-md",modelValue:m.value.description,"onUpdate:modelValue":a[5]||(a[5]=V=>m.value.description=V)},{append:l(()=>[e(D,{name:"close",onClick:a[4]||(a[4]=V=>m.value.description=""),class:"cursor-pointer"})]),_:1},8,["modelValue"])])):(d(),S("span",wa,X(i.row.description),1))]),_:2},1032,["props"]),e(Y,{key:"program",props:i},{default:l(()=>[i.row.id===null||v.value.id===i.row.id?(d(),S("span",ka,[e(re,{class:"row","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",dense:"",outlined:"",ref:"programRef","lazy-rules":"",modelValue:m.value.program,"onUpdate:modelValue":a[6]||(a[6]=V=>m.value.program=V),options:J.value,"option-value":"id","option-label":"name",label:"Programa"},{"no-option":l(()=>[e(ge,null,{default:l(()=>[e(ye,{class:"text-grey"},{default:l(()=>a[10]||(a[10]=[A(" Sem Resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options"])])):(d(),S("span",qa,X(i.row.program.name),1))]),_:2},1032,["props"]),e(Y,{key:"options",props:i},{default:l(()=>[n("div",Ca,[i.row.id===null?(d(),S("span",$a,[e(h,{onClick:N,class:"q-ml-md q-mb-xs float-right",square:"",color:"primary",icon:"save"},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>a[11]||(a[11]=[A("Salvar")])),_:1})]),_:1}),e(h,{onClick:L,class:"q-ml-md q-mb-xs float-right",square:"",color:"amber",icon:"close"},{default:l(()=>[e(T,{class:"bg-amber-5"},{default:l(()=>a[12]||(a[12]=[A("Fechar")])),_:1})]),_:1})])):(d(),S("span",_a,[v.value.id!==i.row.id?(d(),G(h,{key:0,flat:"",round:"",class:"q-ml-md",color:"green-8",icon:"edit",onClick:V=>Q(i.row)},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>a[13]||(a[13]=[A("Detalhar/Editar Program")])),_:1})]),_:2},1032,["onClick"])):B("",!0),v.value.id===i.row.id?(d(),G(h,{key:1,flat:"",round:"",class:"q-ml-md",color:"green-8",icon:"done",onClick:V=>E(i.row)},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>a[14]||(a[14]=[A("Guardar Altera\xE7\xE3o")])),_:1})]),_:2},1032,["onClick"])):B("",!0),v.value.id===i.row.id?(d(),G(h,{key:2,flat:"",round:"",class:"q-ml-md",color:"red-8",icon:"close",onClick:a[7]||(a[7]=V=>j())},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>a[15]||(a[15]=[A("Descartar Altera\xE7\xE3o")])),_:1})]),_:1})):B("",!0),v.value.id!==i.row.id?(d(),G(h,{key:3,flat:"",round:"",class:"q-ml-md",color:"red-8",icon:"delete",onClick:V=>b(i.row.id)},null,8,["onClick"])):B("",!0)]))])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","filter"])]),e($e,{position:"bottom-right",offset:[20,30],class:"row"},{default:l(()=>[e(Ce,{color:"primary",glossy:"",icon:"add",onClick:a[8]||(a[8]=i=>k())})]),_:1})])]))}},Pa={class:"q-pt-sm",style:{height:"100%"}},Sa={class:"q-ma-md q-pa-md page-container"},Aa={class:"full-width row flex-center text-primary q-gutter-sm text-body2"},Ra={key:0},Ua={key:1},Fa={key:0},ha={key:1},xa={class:"col"},Na={key:0},za={key:1},Ea={__name:"ProfessionalCategories",setup(s){const{alertError:I,alertSucess:r,alertWarningAction:g}=pe(),R=c([]),v=c(""),C=c(!1),m=c(!1),y=c({code:"",description:""}),z=[{name:"code",align:"left",label:"C\xF3digo",sortable:!1},{name:"description",align:"left",label:"Descr\xE7\xE3o",sortable:!1},{name:"options",align:"left",label:"Op\xE7\xF5es",sortable:!1}],_=c(new oe);ce(()=>{_.value=JSON.parse(JSON.stringify(ie.getLogedUser())),R.value=me.piniaGetAll()});const J=()=>{const q={code:y.value.code,description:y.value.description};me.saveProfessionalCategory(q).then(o=>{R.value=me.piniaGetAll(),m.value=!1})},N=()=>{E(),k(),C.value=!1},L=q=>{k(),C.value=!1,v.value=q,y.value=q},Q=()=>{const q={id:v.value.id,code:y.value.code,description:y.value.description};me.updateProfessionalCategory(q).then(o=>{R.value=me.piniaGetAll(),E()})},E=()=>{v.value={},y.value={code:"",description:""}},j=q=>{g("Tem certeza que deseja apagar a categoria profissional?").then(o=>{o?me.deleteProfessionalCategory(q).then(a=>{a.status===200||esponse.status===201?r("categoria profissional apagada com sucesso!").then(i=>{me.getAll().then(V=>{R.value=me.piniaGetAll()})}):I("N\xE3o foi possivel apagar a categoria profissional.")}).catch(a=>{console.error(a)}):console.info("OK. the Item Has not removed")})},b=()=>{if(E(),C.value=!0,m.value)I("H\xE1 uma \xE1rea sendo associado.");else{m.value=!0;const q={id:null,programmaticArea:{code:null,description:null},acao:"NOVA_LINHA"};R.value.unshift(q)}},k=()=>{if(C.value==!0){const q=R.value.findIndex(o=>o.id===null);R.value.splice(q,1),m.value=!1}};return(q,o)=>(d(),S("div",Pa,[n("div",Sa,[n("div",null,[e(qe,{class:"col",dense:"",rows:R.value,columns:z,"row-key":"id",filter:q.filter},{"no-data":l(({icon:a,filter:i})=>[n("div",Aa,[o[6]||(o[6]=n("span",null," Sem resultados para visualizar ",-1)),e(D,{size:"2em",name:i?"filter_b_and_w":a},null,8,["name"])])]),body:l(a=>[e(ke,{props:a},{default:l(()=>[e(Y,{key:"code",props:a},{default:l(()=>[a.row.id===null||v.value.id===a.row.id?(d(),S("span",Ra,[e(W,{outlined:"",label:"Code",dense:"",ref:"codeRef",class:"col",modelValue:y.value.code,"onUpdate:modelValue":o[1]||(o[1]=i=>y.value.code=i)},{append:l(()=>[e(D,{name:"close",onClick:o[0]||(o[0]=i=>y.value.code=""),class:"cursor-pointer"})]),_:1},8,["modelValue"])])):(d(),S("span",Ua,X(a.row.code),1))]),_:2},1032,["props"]),e(Y,{key:"description",props:a},{default:l(()=>[a.row.id===null||v.value.id===a.row.id?(d(),S("span",Fa,[e(W,{outlined:"",label:"Descri\xE7\xE3o",dense:"",ref:"descriptionRef",class:"col q-ml-md",modelValue:y.value.description,"onUpdate:modelValue":o[3]||(o[3]=i=>y.value.description=i)},{append:l(()=>[e(D,{name:"close",onClick:o[2]||(o[2]=i=>y.value.description=""),class:"cursor-pointer"})]),_:1},8,["modelValue"])])):(d(),S("span",ha,X(a.row.description),1))]),_:2},1032,["props"]),e(Y,{key:"options",props:a},{default:l(()=>[n("div",xa,[a.row.id===null?(d(),S("span",Na,[e(h,{onClick:J,class:"q-ml-md q-mb-xs float-right",square:"",color:"primary",icon:"save"},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>o[7]||(o[7]=[A("Salvar")])),_:1})]),_:1}),e(h,{onClick:N,class:"q-ml-md q-mb-xs float-right",square:"",color:"amber",icon:"close"},{default:l(()=>[e(T,{class:"bg-amber-5"},{default:l(()=>o[8]||(o[8]=[A("Fechar")])),_:1})]),_:1})])):(d(),S("span",za,[v.value.id!==a.row.id?(d(),G(h,{key:0,flat:"",round:"",class:"q-ml-md",color:"green-8",icon:"edit",onClick:i=>L(a.row)},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>o[9]||(o[9]=[A("Detalhar/Editar Program")])),_:1})]),_:2},1032,["onClick"])):B("",!0),v.value.id===a.row.id?(d(),G(h,{key:1,flat:"",round:"",class:"q-ml-md",color:"green-8",icon:"done",onClick:i=>Q(a.row)},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>o[10]||(o[10]=[A("Guardar Altera\xE7\xE3o")])),_:1})]),_:2},1032,["onClick"])):B("",!0),v.value.id===a.row.id?(d(),G(h,{key:2,flat:"",round:"",class:"q-ml-md",color:"red-8",icon:"close",onClick:o[4]||(o[4]=i=>E())},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>o[11]||(o[11]=[A("Guardar Altera\xE7\xE3o")])),_:1})]),_:1})):B("",!0),v.value.id!==a.row.id?(d(),G(h,{key:3,flat:"",round:"",class:"q-ml-md",color:"red-8",icon:"delete",onClick:i=>j(a.row.id)},null,8,["onClick"])):B("",!0)]))])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","filter"])]),e($e,{position:"bottom-right",offset:[20,30],class:"row"},{default:l(()=>[e(Ce,{color:"primary",glossy:"",icon:"add",onClick:o[5]||(o[5]=a=>b())})]),_:1})])]))}},Oa={class:"q-pt-sm",style:{height:"100%"}},Da={class:"q-ma-md q-pa-md page-container"},Ia={class:"full-width row flex-center text-primary q-gutter-sm text-body2"},Ta={key:0},Qa={key:1},Ga={key:0},La={key:1},Ha={key:0},Ba={key:1},ja={class:"col"},Ja={style:{float:"right"},class:"q-mt-md"},Ma={__name:"HealthFacilities",emits:["goToHealthFacilityingAreas"],setup(s,{emit:I}){const{createHealthFacilityFromDTO:r}=Le(),{closeLoading:g,showloading:R}=Je(),{alertError:v,alertSucess:C,alertWarningAction:m}=pe();we("step");const y=c([]),z=c(!0),_=c(""),J=c(!1),N=c({healthFacility:"",province:"",district:""}),L=c(!1),Q=[{name:"healthFacility",align:"left",label:"Unidade sanit\xE1ria",sortable:!1},{name:"province",align:"left",label:"Provincia",sortable:!1},{name:"district",align:"left",label:"Distrito",sortable:!1},{name:"options",align:"left",label:"Op\xE7\xF5es",sortable:!1}],E=c({page:1,rowsPerPage:10,rowsNumber:0}),j=H=>{E.value.page=H.pagination.page,E.value.rowsPerPage=H.pagination.rowsPerPage,k()},b=c(new oe);ce(()=>{R(),b.value=JSON.parse(JSON.stringify(ie.getLogedUser())),k(),g()});const k=()=>{z.value=!0,q()},q=async()=>{const H={page:E.value.page-1,size:E.value.rowsPerPage};Object.keys(H).forEach(P=>H[P]===""&&delete H[P]),ne.getAll(H).then(P=>{y.value=[],console.log(P),P.data.content.forEach(O=>{y.value.push(r(O))}),E.value.rowsNumber=P.data.totalPages}).catch(P=>{console.error(P)}).finally(()=>{z.value=!1})},o=x(()=>Ze.piniaGetAll()),a=x(()=>{const H=el.piniaGetAll();return N.value.province?H.filter(P=>P.province_id==N.value.province.id):[]}),i=H=>H.id===null||_.value.id===H.id,V=()=>{const H={healthFacility:N.value.healthFacility,districtDTO:N.value.district};ne.saveHealthFacility(H).then(P=>{p(),J.value=!1,ne.getAll().then(O=>{y.value=ne.piniaGetAll(),z.value=!1})})},p=()=>{w(),te(),L.value=!1},$=H=>{te(),L.value=!1,_.value=H,N.value={...H,province:H.district.province}},ee=()=>{const H={id:_.value.id,...N.value};H.district=N.value.district,ne.updateHealthFacility(Le().createDTOFromHealthFacility(H)).then(P=>{ne.getAll().then(()=>{y.value=ne.piniaGetAll(),z.value=!1,w(),M()})})},M=()=>{_.value={},N.value={healthFacility:"",province:"",district:""}},w=()=>{_.value={}},f=H=>{m("Tem certeza que deseja apagar a unidade sanitaria?").then(P=>{P&&ne.deleteHealthFacility(H).then(O=>{O.status===200||O.status===201?C("Unidade sanitaria apagada com sucesso!").then(le=>{ne.getAll().then(Se=>{y.value=ne.piniaGetAll(),z.value=!1})}):v("N\xE3o foi possivel apagar a unidade sanitaria.")}).catch(v)})},U=()=>{w(),L.value=!0,J.value?v("H\xE1 uma \xE1rea sendo associado."):(J.value=!0,y.value.unshift({id:null,healthFacility:"",province:"",district:"",acao:"NOVA_LINHA"}))},te=()=>{if(L.value){const H=y.value.findIndex(P=>P.id===null);y.value.splice(H,1),J.value=!1}},se=H=>{N.value[H]=""};return Ue(()=>E.value.page,H=>{k()}),(H,P)=>(d(),G(Ie,null,{default:l(()=>[n("div",Oa,[n("div",Da,[n("div",null,[e(qe,{class:"col",dense:"",rows:y.value,columns:Q,"row-key":"id",pagination:E.value,"onUpdate:pagination":P[4]||(P[4]=O=>E.value=O),filter:H.filter,loading:z.value,onRequest:j},{"no-data":l(({icon:O,filter:le})=>[n("div",Ia,[P[6]||(P[6]=n("span",null,"Sem resultados para visualizar",-1)),e(D,{size:"2em",name:le?"filter_b_and_w":O},null,8,["name"])])]),body:l(O=>[e(ke,{props:O},{default:l(()=>[e(Y,{key:"healthFacility",props:O},{default:l(()=>[i(O.row)?(d(),S("span",Ta,[e(W,{outlined:"",label:"Unidade Sanitaria",dense:"",modelValue:N.value.healthFacility,"onUpdate:modelValue":P[1]||(P[1]=le=>N.value.healthFacility=le)},{append:l(()=>[e(D,{name:"close",onClick:P[0]||(P[0]=le=>se("healthFacility")),class:"cursor-pointer"})]),_:1},8,["modelValue"])])):(d(),S("span",Qa,X(O.row.healthFacility),1))]),_:2},1032,["props"]),e(Y,{key:"province",props:O},{default:l(()=>{var le;return[i(O.row)?(d(),S("span",Ga,[e(re,{"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",dense:"",outlined:"",modelValue:N.value.province,"onUpdate:modelValue":P[2]||(P[2]=Se=>N.value.province=Se),options:o.value,"option-value":"id","option-label":"designation",label:"Provincias"},{"no-option":l(()=>[e(ge,null,{default:l(()=>[e(ye,{class:"text-grey"},{default:l(()=>P[7]||(P[7]=[A("Sem Resultados")])),_:1})]),_:1})]),_:1},8,["modelValue","options"])])):(d(),S("span",La,X((le=O.row.district.province)==null?void 0:le.designation),1))]}),_:2},1032,["props"]),e(Y,{key:"district",props:O},{default:l(()=>[i(O.row)?(d(),S("span",Ha,[e(re,{"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",dense:"",outlined:"",modelValue:N.value.district,"onUpdate:modelValue":P[3]||(P[3]=le=>N.value.district=le),options:a.value,"option-value":"id","option-label":"description",label:"Distritos"},{"no-option":l(()=>[e(ge,null,{default:l(()=>[e(ye,{class:"text-grey"},{default:l(()=>P[8]||(P[8]=[A("Sem Resultados")])),_:1})]),_:1})]),_:1},8,["modelValue","options"])])):(d(),S("span",Ba,X(O.row.district.description),1))]),_:2},1032,["props"]),e(Y,{key:"options",props:O},{default:l(()=>[n("div",ja,[O.row.id===null?(d(),S(xe,{key:0},[e(h,{onClick:V,class:"q-ml-md q-mb-xs float-right",square:"",color:"primary",icon:"save"},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>P[9]||(P[9]=[A("Salvar")])),_:1})]),_:1}),e(h,{onClick:p,class:"q-ml-md q-mb-xs float-right",square:"",color:"amber",icon:"close"},{default:l(()=>[e(T,{class:"bg-amber-5"},{default:l(()=>P[10]||(P[10]=[A("Fechar")])),_:1})]),_:1})],64)):(d(),S(xe,{key:1},[e(h,{flat:"",round:"",class:"q-ml-md",color:"green-8",icon:"edit",onClick:le=>$(O.row)},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>P[11]||(P[11]=[A("Detalhar/Editar Program")])),_:1})]),_:2},1032,["onClick"]),_.value.id===O.row.id?(d(),G(h,{key:0,flat:"",round:"",class:"q-ml-md",color:"green-8",icon:"done",onClick:le=>ee(O.row)},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>P[12]||(P[12]=[A("Guardar Altera\xE7\xE3o")])),_:1})]),_:2},1032,["onClick"])):B("",!0),_.value.id===O.row.id?(d(),G(h,{key:1,flat:"",round:"",class:"q-ml-md",color:"red-8",icon:"close",onClick:w},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>P[13]||(P[13]=[A("Descartar Altera\xE7\xE3o")])),_:1})]),_:1})):B("",!0),e(h,{flat:"",round:"",class:"q-ml-md",color:"red-8",icon:"delete",onClick:le=>f(O.row.id)},null,8,["onClick"])],64))])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","filter","loading"])]),n("div",Ja,[e(De,{modelValue:E.value.page,"onUpdate:modelValue":P[5]||(P[5]=O=>E.value.page=O),max:E.value.rowsNumber,"boundary-numbers":"","direction-links":"",color:"primary"},null,8,["modelValue","max"])]),e($e,{position:"bottom-right",offset:[20,30],class:"row"},{default:l(()=>[e(Ce,{color:"primary",glossy:"",icon:"add",onClick:U})]),_:1})])])]),_:1}))}},Ka={class:"q-pt-sm",style:{height:"100%"}},Wa={class:"q-ma-md q-pa-md page-container"},Ya={class:"full-width row flex-center text-primary q-gutter-sm text-body2"},Xa={key:0},Za={key:1},eo={key:0},lo={key:1},ao={class:"col"},oo={key:0},to={key:1},so={__name:"Partners",setup(s){const{alertError:I,alertSucess:r,alertWarningAction:g}=pe(),R=c([]),v=c(""),C=c(!1),m=c({name:"",description:""}),y=c(!1),z=[{name:"name",align:"left",label:"Nome",sortable:!1},{name:"description",align:"left",label:"Descri\xE7\xE3o",sortable:!1},{name:"options",align:"left",label:"Op\xE7\xF5es",sortable:!1}],_=c(new oe);ce(()=>{_.value=JSON.parse(JSON.stringify(ie.getLogedUser())),R.value=ae.piniaGetAll()});const J=()=>{const q={name:m.value.name,description:m.value.description};ae.savePartner(q).then(o=>{N(),C.value=!1,ae.getAll().then(a=>{R.value=ae.piniaGetAll()})})},N=()=>{E(),k(),y.value=!1},L=q=>{k(),y.value=!1,v.value=q,m.value=q},Q=()=>{const q={id:v.value.id,name:m.value.name,description:m.value.description};ae.updatePartner(Vl().createDTOFromPartner(q)).then(()=>{ae.getAll().then(()=>{R.value=ae.piniaGetAll(),E()})})},E=()=>{v.value={},m.value={name:"",description:""}},j=q=>{g("Tem certeza que deseja apagar o partnera?").then(o=>{o?ae.deletePartner(q).then(a=>{a.status===200||esponse.status===201?r("Parceiro apagado com sucesso!").then(i=>{ae.getAll().then(V=>{R.value=ae.piniaGetAll()})}):I("N\xE3o foi possivel apagar o Parceiro.")}).catch(a=>{console.error(a)}):console.info("OK. the Item Has not removed")})},b=()=>{if(E(),y.value=!0,C.value)I("H\xE1 uma \xE1rea sendo associado.");else{C.value=!0;const q={id:null,programmaticArea:{name:null,description:null},acao:"NOVA_LINHA"};R.value.unshift(q)}},k=()=>{if(y.value==!0){const q=R.value.findIndex(o=>o.id===null);R.value.splice(q,1),C.value=!1}};return(q,o)=>(d(),S("div",Ka,[n("div",Wa,[n("div",null,[e(qe,{class:"col",dense:"",rows:R.value,columns:z,"row-key":"id",filter:q.filter},{"no-data":l(({icon:a,filter:i})=>[n("div",Ya,[o[5]||(o[5]=n("span",null," Sem resultados para visualizar ",-1)),e(D,{size:"2em",name:i?"filter_b_and_w":a},null,8,["name"])])]),body:l(a=>[e(ke,{props:a},{default:l(()=>[e(Y,{key:"name",props:a},{default:l(()=>[a.row.id===null||v.value.id===a.row.id?(d(),S("span",Xa,[e(W,{outlined:"",label:"Nome",dense:"",ref:"nameRef",class:"col",modelValue:m.value.name,"onUpdate:modelValue":o[1]||(o[1]=i=>m.value.name=i)},{append:l(()=>[e(D,{name:"close",onClick:o[0]||(o[0]=i=>m.value.name=""),class:"cursor-pointer"})]),_:1},8,["modelValue"])])):(d(),S("span",Za,X(a.row.name),1))]),_:2},1032,["props"]),e(Y,{key:"description",props:a},{default:l(()=>[a.row.id===null||v.value.id===a.row.id?(d(),S("span",eo,[e(W,{outlined:"",label:"Descri\xE7\xE3o",dense:"",ref:"descriptionRef",class:"col q-ml-md",modelValue:m.value.description,"onUpdate:modelValue":o[3]||(o[3]=i=>m.value.description=i)},{append:l(()=>[e(D,{name:"close",onClick:o[2]||(o[2]=i=>m.value.description=""),class:"cursor-pointer"})]),_:1},8,["modelValue"])])):(d(),S("span",lo,X(a.row.description),1))]),_:2},1032,["props"]),e(Y,{key:"options",props:a},{default:l(()=>[n("div",ao,[a.row.id===null?(d(),S("span",oo,[e(h,{onClick:J,class:"q-ml-md q-mb-xs float-right",square:"",color:"primary",icon:"save"},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>o[6]||(o[6]=[A("Salvar")])),_:1})]),_:1}),e(h,{onClick:N,class:"q-ml-md q-mb-xs float-right",square:"",color:"amber",icon:"close"},{default:l(()=>[e(T,{class:"bg-amber-5"},{default:l(()=>o[7]||(o[7]=[A("Fechar")])),_:1})]),_:1})])):(d(),S("span",to,[v.value.id!==a.row.id?(d(),G(h,{key:0,flat:"",round:"",class:"q-ml-md",color:"green-8",icon:"edit",onClick:i=>L(a.row)},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>o[8]||(o[8]=[A("Detalhar/Editar Program")])),_:1})]),_:2},1032,["onClick"])):B("",!0),v.value.id===a.row.id?(d(),G(h,{key:1,flat:"",round:"",class:"q-ml-md",color:"green-8",icon:"done",onClick:i=>Q(a.row)},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>o[9]||(o[9]=[A("Guardar Altera\xE7\xE3o")])),_:1})]),_:2},1032,["onClick"])):B("",!0),v.value.id===a.row.id?(d(),G(h,{key:2,flat:"",round:"",class:"q-ml-md",color:"red-8",icon:"close",onClick:o[4]||(o[4]=i=>E())},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>o[10]||(o[10]=[A("Descartar Altera\xE7\xE3o")])),_:1})]),_:1})):B("",!0),v.value.id!==a.row.id?(d(),G(h,{key:3,flat:"",round:"",class:"q-ml-md",color:"red-8",icon:"delete",onClick:i=>j(a.row.id)},null,8,["onClick"])):B("",!0)]))])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","filter"])]),e($e,{position:"bottom-right",offset:[20,30],class:"row"},{default:l(()=>[e(Ce,{color:"primary",glossy:"",icon:"add",onClick:b})]),_:1})])]))}},He=Ye(Pl),{createUserRoleFromDTO:no}=Sl();var Be={async mergeUserRole(s,I){return await ze().put(`/userRoles/merge?userId=${s}&roleId=${I}`).then(r=>(this.generateAndSaveEntityFromDTO(r.data),r)).catch(r=>(console.error("Error",r.message),{error:r.message}))},generateAndSaveEntityFromDTO(s){s==null||s.forEach(I=>{const r=no(I);He.save(r)})},piniaGetAll(){return He.query().withAllRecursive(2).get()}};const Fe=Ye(Al),{createRoleFromDTO:je}=Rl();var tl={async getAll(){return await ze().get("/roles/getAll").then(s=>(this.generateAndSaveEntityFromDTO(s.data),s)).catch(s=>{console.error("Error",s.message)})},generateAndSaveEntityFromDTO(s){s==null||s.forEach(I=>{const r=je(I);Fe.save(r)})},piniaGetAll(){return Fe.query().withAllRecursive(2).orderBy("description","asc").get()},async saveRole(s){return await ze().post("/roles/save",s).then(I=>(Fe.save(je(I.data)),I)).catch(I=>{console.error("Error",I.message)})}};const ro=()=>["ACTIVE","INACTIVE"],io={class:"q-ma-md page-container"},uo={class:"q-ma-md"},mo={class:"page-input-container q-pa-md"},co={class:"q-mt-lg"},vo={class:"row items-center q-mb-md"},fo={class:"row q-my-sm"},po={class:"row q-my-sm q-mt-md"},go={class:"q-mt-lg"},yo={class:"row items-center q-mb-md"},bo={class:"row q-my-sm"},wo={class:"q-mt-lg"},ko={class:"row items-center q-mb-md"},qo={class:"row q-my-sm"},Co={class:"q-mt-lg"},$o={class:"row items-center q-mb-md"},_o={class:"row q-my-sm"},Vo={class:"row q-my-sm"},Po={class:"q-mt-lg"},So={class:"row items-center q-mb-md"},Ao={class:"row q-my-sm"},Ro={class:"q-mt-lg"},Uo={class:"row items-center q-mb-md"},Fo={class:"row q-my-sm q-mt-md"},ho={class:"row q-my-sm"},sl={__name:"UserForm",emits:["goToUseringAreas","close"],setup(s,{emit:I}){const r=c(new oe({employee:new Re({locations:[{location:new he}]})})),g=I,{createDTOFromUser:R}=Oe(),{stringContains:v}=Il(),{alertSucess:C,alertError:m,alertSucessAction:y}=pe(),z=c([]),_=c([]),J=c([]),N=c([]),L=c(""),Q=c(["SNS","ONG"]);c(new he);const E=c(null),j=c(null),b=c(null),k=c(null),q=c(null),o=c(null),a=c(null),i=c(null),V=c(null),p=c(null),$=c(null),ee=c(null),M=c(null),w=c(ro()),f=we("selectedUser"),U=we("step"),te=x(()=>U.value==="userEdit"),se=x(()=>tl.piniaGetAll().map(t=>({...t,label:`${t.description} ${t.level}`})).filter(t=>t.code!=="ROOT")),H=x(()=>{var u;return(u=Be.piniaGetAll().filter(Z=>(Z==null?void 0:Z.user_id)==r.value.id)[0])==null?void 0:u.role_id}),P=()=>{te.value&&(r.value=Object.assign({},f.value),L.value=r.value.employee.partner.name==="MISAU"?"SNS":"ONG"),r.value.role=se.value.filter(F=>F.id===H.value)[0]};ce(()=>{P()});const O=x(()=>Ze.piniaGetAll()),le=x(()=>L.value==="ONG"),Se=x(()=>me.piniaGetAll()),nl=x(()=>r.value.employee.locations[0].province!==null&&r.value.employee.locations[0].province!==void 0?el.getAllDistrictByProvinceId(r.value.employee.locations[0].province.id):null),rl=x(()=>ae.piniaGetAll()),il=c(null),ul=()=>{if(E.value.validate(),j.value.validate(),b.value.validate(),k.value.validate(),q.value.validate(),o.value.validate(),a.value.validate(),i.value.validate(),V.value!==null&&V.value.validate(),p.value.validate(),$.value.validate(),ee.value.validate(),M.value.validate(),!E.value.hasError&&!j.value.hasError&&!k.value.hasError&&!M.value.hasError&&!q.value.hasError&&!o.value.hasError&&!a.value.hasError&&!i.value.hasError&&!p.value.hasError&&!$.value.hasError&&!ee.value.hasError){Pe.show({spinner:Me});const F=Object.assign({},r.value),t=R(new oe(F));te.value?ie.updateUser(t).then(u=>Te(u,"User actualizado.","close")).catch(u=>Qe(u,"Erro ao atualizar o User")):ie.saveUser(t).then(u=>Te(u,"User criado com sucesso","cancel")).catch(u=>Qe(u,"Ocorreu um erro ao tentar criar User"))}},Te=(F,t,u)=>{F.status===200||F.status===201?Be.mergeUserRole(F.data.id,r.value.role.id).then(()=>{C(t).then(()=>{g(u)})}):m(F==null?void 0:F.message),Pe.hide()},Qe=(F,t)=>{Pe.hide(),console.error("Error",F),m(t)},dl=F=>/^[A-Za-z0-9+_.-]+@(.+)$/.test(F),ml=F=>F!==""&&!v(F,"#"),cl=F=>F!==""&&!v(F,"#"),vl=F=>F!==""&&!v(F,"_"),fl=(F,t,u)=>{const Z=rl;F===""?t(()=>{N.value=Z.value.map(K=>K)}):Z.value.length===0?t(()=>{N.value=[]}):t(()=>{N.value=Z.value.map(K=>K).filter(K=>K&&K.description.toLowerCase().indexOf(F.toLowerCase())!==-1)})},pl=(F,t,u)=>{const Z=nl;F===""?t(()=>{z.value=Z.value.map(K=>K)}):Z.value.length===0?t(()=>{z.value=[]}):t(()=>{z.value=Z.value.map(K=>K).filter(K=>K&&K.description.toLowerCase().indexOf(F.toLowerCase())!==-1)})},gl=x(()=>r.value.employee.locations[0].district!==null&&r.value.employee.locations[0].district!==void 0?ne.getAllOfDistrict(r.value.employee.locations[0].district.id):null),yl=(F,t,u)=>{const Z=gl;F===""?t(()=>{_.value=Z.value.map(K=>K)}):Z.value.length===0?t(()=>{_.value=[]}):t(()=>{_.value=Z.value.map(K=>K).filter(K=>K&&K.healthFacility.toLowerCase().indexOf(F.toLowerCase())!==-1)})},bl=(F,t,u)=>{const Z=Se;F===""?t(()=>{J.value=Z.value.map(K=>K)}):Z.value.length===0?t(()=>{J.value=[]}):t(()=>{J.value=Z.value.map(K=>K).filter(K=>K&&K.description.toLowerCase().indexOf(F.toLowerCase())!==-1)})},wl=()=>{r.value.employee.locations[0].district="",r.value.employee.locations[0].district=""},kl=F=>{r.value.status=F},ql=F=>{F==="SNS"?r.value.employee.partner=ae.getByName("MISAU"):r.value.employee.partner=""};return(F,t)=>(d(),S("div",null,[n("div",io,[n("form",{ref_key:"myForm",ref:il},[n("div",uo,[e(ol,{dense:"","inline-actions":"",class:"text-white bg-primary q-px-md"},{action:l(()=>[e(ll,{src:al})]),default:l(()=>[t[34]||(t[34]=A(" Dados do User "))]),_:1}),n("div",mo,[n("div",co,[n("div",vo,[e(D,{name:"person_outline",size:"sm"}),t[35]||(t[35]=n("span",{class:"q-pl-sm text-subtitle2"},"Identifica\xE7\xE3o do User",-1))]),e(fe,{color:"grey-13",size:"1px"})]),n("div",fo,[e(W,{outlined:"",label:"Nome",dense:"",ref_key:"nameRef",ref:E,rules:[u=>!!u||"Por favor indicar o nome"],"lazy-rules":"",class:"col",modelValue:r.value.employee.name,"onUpdate:modelValue":[t[1]||(t[1]=u=>r.value.employee.name=u),t[2]||(t[2]=u=>F.filter=u)]},{append:l(()=>[e(D,{name:"close",onClick:t[0]||(t[0]=u=>r.value.employee.name=""),class:"cursor-pointer"})]),_:1},8,["rules","modelValue"]),e(W,{outlined:"",label:"Apelido",dense:"",rules:[u=>!!u||"Por favor indicar o apelido"],"lazy-rules":"",ref_key:"surnameRef",ref:j,class:"col q-ml-md",modelValue:r.value.employee.surname,"onUpdate:modelValue":[t[4]||(t[4]=u=>r.value.employee.surname=u),t[5]||(t[5]=u=>F.filter=u)]},{append:l(()=>[e(D,{name:"close",onClick:t[3]||(t[3]=u=>r.value.employee.surname=""),class:"cursor-pointer"})]),_:1},8,["rules","modelValue"])]),n("div",po,[e(W,{outlined:"",label:"NUIT",dense:"",ref_key:"nuitRef",ref:b,class:"col",mask:"#########","lazy-rules":"",rules:[u=>ml(u)||"Por favor indicar um NUIT v\xE1lido."],"fill-mask":"#",modelValue:r.value.employee.nuit,"onUpdate:modelValue":[t[7]||(t[7]=u=>r.value.employee.nuit=u),t[8]||(t[8]=u=>F.filter=u)]},{append:l(()=>[e(D,{name:"close",onClick:t[6]||(t[6]=u=>r.value.employee.nuit=""),class:"cursor-pointer"})]),_:1},8,["rules","modelValue"]),t[36]||(t[36]=n("span",{class:"col"},null,-1))]),n("div",go,[n("div",yo,[e(D,{name:"call",size:"sm"}),t[37]||(t[37]=n("span",{class:"q-pl-sm text-subtitle2"},"Contacto",-1))]),e(fe,{color:"grey-13",size:"1px"})]),n("div",bo,[e(W,{outlined:"",label:"Numero de Telefone",dense:"",ref_key:"phoneNumberRef",ref:k,mask:"#########",hint:"Formato: #########","lazy-rules":"",rules:[u=>vl(u)||"Por favor indicar um contacto v\xE1lido."],"fill-mask":"#",class:"col",modelValue:r.value.employee.phoneNumber,"onUpdate:modelValue":[t[10]||(t[10]=u=>r.value.employee.phoneNumber=u),t[11]||(t[11]=u=>F.filter=u)]},{append:l(()=>[e(D,{name:"close",onClick:t[9]||(t[9]=u=>r.value.employee.phoneNumber=""),class:"cursor-pointer"})]),_:1},8,["rules","modelValue"]),e(W,{outlined:"",label:"Email",dense:"",ref_key:"emailRef",ref:q,class:"col q-ml-md",rules:[u=>dl(u)||"Email inv\xE1lido"],"lazy-rules":"",modelValue:r.value.employee.email,"onUpdate:modelValue":[t[13]||(t[13]=u=>r.value.employee.email=u),t[14]||(t[14]=u=>F.filter=u)]},{append:l(()=>[e(D,{name:"close",onClick:t[12]||(t[12]=u=>r.value.employee.email=""),class:"cursor-pointer"})]),_:1},8,["rules","modelValue"])]),n("div",wo,[n("div",ko,[e(D,{name:"lock_outline",size:"sm"}),t[38]||(t[38]=n("span",{class:"q-pl-sm text-subtitle2"},"Credenciais",-1))]),e(fe,{color:"grey-13",size:"1px"})]),n("div",qo,[e(W,{outlined:"",label:"Nome do Utilizador",dense:"",ref_key:"usernameRef",ref:M,rules:[u=>!!u||"Por favor indicar o nome"],"lazy-rules":"",class:"col",modelValue:r.value.username,"onUpdate:modelValue":[t[16]||(t[16]=u=>r.value.username=u),t[17]||(t[17]=u=>F.filter=u)]},{append:l(()=>[e(D,{name:"close",onClick:t[15]||(t[15]=u=>r.value.username=""),class:"cursor-pointer"})]),_:1},8,["rules","modelValue"]),e(re,{class:"col q-ml-md","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",dense:"",outlined:"",ref:"roleRef","lazy-rules":"",rules:[u=>!!u||"Por favor indicar o V\xEDnculo Laboral"],modelValue:r.value.role,"onUpdate:modelValue":t[18]||(t[18]=u=>r.value.role=u),options:se.value,"option-value":"id","option-label":"label",label:"Perfil de Acesso"},null,8,["rules","modelValue","options"])]),n("div",Co,[n("div",$o,[e(D,{name:"engineering",size:"sm"}),t[39]||(t[39]=n("span",{class:"q-pl-sm text-subtitle2"},"Informa\xE7\xE3o Laboral",-1))]),e(fe,{color:"grey-13",size:"1px"})]),n("div",_o,[e(re,{class:"col","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",dense:"",outlined:"",ref_key:"categoryRef",ref:o,rules:[u=>!!u||"Por favor indicar a categoria profissional"],"lazy-rules":"",modelValue:r.value.employee.professionalCategory,"onUpdate:modelValue":t[19]||(t[19]=u=>r.value.employee.professionalCategory=u),options:J.value,"option-value":"id","option-label":"description",onFilter:bl,label:"Categoria Profissional"},{"no-option":l(()=>[e(ge,null,{default:l(()=>[e(ye,{class:"text-grey"},{default:l(()=>t[40]||(t[40]=[A(" Sem Resultados ")])),_:1})]),_:1})]),_:1},8,["rules","modelValue","options"]),e(W,{outlined:"",label:"Ano de Forma\xE7\xE3o",dense:"",ref_key:"trainingYearRef",ref:a,rules:[u=>cl(u)||"Ano de forma\xE7\xE3o inv\xE1lido"],"lazy-rules":"",mask:"####","fill-mask":"#",class:"col q-ml-md",modelValue:r.value.employee.trainingYear,"onUpdate:modelValue":[t[21]||(t[21]=u=>r.value.employee.trainingYear=u),t[22]||(t[22]=u=>F.filter=u)]},{append:l(()=>[e(D,{name:"close",onClick:t[20]||(t[20]=u=>r.value.employee.trainingYear=""),class:"cursor-pointer"})]),_:1},8,["rules","modelValue"]),e(re,{class:"col q-ml-md","use-input":"","hide-selected":"","onUpdate:modelValue":[t[23]||(t[23]=u=>ql(u)),t[24]||(t[24]=u=>L.value=u)],"fill-input":"","input-debounce":"0",dense:"",outlined:"",ref_key:"vinculoRef",ref:i,"lazy-rules":"",rules:[u=>!!u||"Por favor indicar o V\xEDnculo Laboral"],modelValue:L.value,options:Q.value,label:"V\xEDnculo Laboral"},null,8,["rules","modelValue","options"])]),n("div",Vo,[le.value?(d(),G(re,{key:0,class:"col-4","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",dense:"",outlined:"",ref_key:"partnerRef",ref:V,"lazy-rules":"",rules:[u=>!!u||"Por favor indicar o Nome da ONG"],modelValue:r.value.employee.partner,"onUpdate:modelValue":t[25]||(t[25]=u=>r.value.employee.partner=u),options:N.value,"option-value":"id","option-label":"description",onFilter:fl,label:"Nome da ONG"},{"no-option":l(()=>[e(ge,null,{default:l(()=>[e(ye,{class:"text-grey"},{default:l(()=>t[41]||(t[41]=[A(" Sem Resultados ")])),_:1})]),_:1})]),_:1},8,["rules","modelValue","options"])):B("",!0)]),n("div",Po,[n("div",So,[e(D,{name:"local_hospital",size:"sm"}),t[42]||(t[42]=n("span",{class:"q-pl-sm text-subtitle2"},"Unidade Sanit\xE1ria",-1))]),e(fe,{color:"grey-13",size:"1px"})]),n("div",Ao,[e(re,{class:"col","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0","onUpdate:modelValue":[t[26]||(t[26]=u=>wl()),t[27]||(t[27]=u=>r.value.employee.locations[0].province=u)],dense:"",outlined:"",ref_key:"provinceRef",ref:p,modelValue:r.value.employee.locations[0].province,options:O.value,"option-value":"id","option-label":"designation",label:"Prov\xEDncia"},null,8,["modelValue","options"]),e(re,{class:"col q-ml-md","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",dense:"",outlined:"",ref_key:"districtRef",ref:$,modelValue:r.value.employee.locations[0].district,"onUpdate:modelValue":t[28]||(t[28]=u=>r.value.employee.locations[0].district=u),options:z.value,"option-value":"id","option-label":"description",onFilter:pl,label:"Distrito"},{"no-option":l(()=>[e(ge,null,{default:l(()=>[e(ye,{class:"text-grey"},{default:l(()=>t[43]||(t[43]=[A(" Sem Resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options"]),e(re,{class:"col q-ml-md","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",dense:"",outlined:"",ref_key:"hfRef",ref:ee,modelValue:r.value.employee.locations[0].healthFacility,"onUpdate:modelValue":t[29]||(t[29]=u=>r.value.employee.locations[0].healthFacility=u),options:_.value,"option-value":"id","option-label":"healthFacility",onFilter:yl,label:"Unidade Sanit\xE1ria"},{"no-option":l(()=>[e(ge,null,{default:l(()=>[e(ye,{class:"text-grey"},{default:l(()=>t[44]||(t[44]=[A(" Sem Resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),n("div",Ro,[n("div",Uo,[e(D,{name:"local_hospital",size:"sm"}),t[45]||(t[45]=n("span",{class:"q-pl-sm text-subtitle2"},"Estado do Utilizador",-1))]),e(fe,{color:"grey-13",size:"1px"})]),n("div",Fo,[e(re,{"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0","onUpdate:modelValue":[t[30]||(t[30]=u=>kl()),t[31]||(t[31]=u=>r.value.lifeCycleStatus=u)],dense:"",outlined:"",ref:"statusRef","lazy-rules":"",rules:[u=>!!u||"Por favor indicar o STatus"],modelValue:r.value.lifeCycleStatus,options:w.value,label:"Status"},null,8,["rules","modelValue","options"])]),n("div",ho,[e(Ee),e(h,{label:"Cancelar",class:"float-right",color:"red",onClick:t[32]||(t[32]=u=>F.$emit("cancel"))}),e(h,{class:"float-right q-ml-md",type:"submit",label:"Submeter",color:"primary",onClick:t[33]||(t[33]=u=>ul())})])])])],512)])]))}},xo={class:"q-pt-sm",style:{height:"100%"}},No={key:0,class:"q-ma-md q-pa-md page-container"},zo={class:"row"},Eo={class:"q-mt-lg q-mb-md"},Oo={class:"row items-center q-mb-md"},Do={class:"full-width row flex-center text-primary q-gutter-sm text-body2"},Io={class:"col"},To={style:{float:"right"},class:"q-mt-md"},Qo={__name:"Users",emits:["reset-password","select-user","edit-user"],setup(s,{emit:I}){const{createUserFromDTO:r}=Oe(),g=c(new oe({employee:new Re})),{alertError:R,alertSucess:v,alertWarningAction:C}=pe(),m=c([]),y=c(""),z=c({page:1,rowsPerPage:10,rowsNumber:0}),_=c(!0),J=c(!1),N=[{name:"name",align:"left",label:"Nome",sortable:!1},{name:"nuit",align:"left",label:"NUIT",sortable:!1},{name:"healthFacility",align:"left",label:"Unidade Sanit\xE1ria",sortable:!1},{name:"username",align:"left",label:"Utilizador",sortable:!1},{name:"options",align:"left",label:"Op\xE7\xF5es",sortable:!1}],L=I,Q=c(new oe);ce(()=>{Q.value=JSON.parse(JSON.stringify(ie.getLogedUser())),a()});const E=V=>{y.value=V,L("edit-user","userForm"),L("select-user",V)},j=V=>{y.value=V,L("reset-password"),L("select-user",V)},b=V=>{y.value=V},k=V=>{C("Tem certeza que deseja apagar o user?").then(p=>{p?ie.deleteUser(V).then($=>{$.status===200||esponse.status===201?v("User apagado com sucesso!").then(ee=>{ee&&L("close")}):R("N\xE3o foi possivel apagar o usera.")}).catch($=>{console.error($)}):console.info("OK. the Item Has not removed")})},q=()=>{g.value=new oe({employee:new Re})};Ne("openForm",J);const o=V=>{z.value.page=V.pagination.page,z.value.rowsPerPage=V.pagination.rowsPerPage,a()},a=()=>{_.value=!0,i()},i=async()=>{const V={userId:Q.value.id,name:g.value.employee.name,nuit:g.value.employee.nuit,username:g.value.username,page:z.value.page-1,size:z.value.rowsPerPage};Object.keys(V).forEach(p=>V[p]===""&&delete V[p]),ie.search(V).then(p=>{m.value=[],p.data.content.forEach($=>{m.value.push(r($))}),z.value.rowsNumber=p.data.totalPages}).catch(p=>{console.error(p)}).finally(()=>{_.value=!1})};return Ue(()=>z.value.page,V=>{a()}),(V,p)=>(d(),G(Ie,null,{default:l(()=>[n("div",xo,[J.value?B("",!0):(d(),S("div",No,[n("div",zo,[e(W,{outlined:"",label:"Nome",dense:"",ref:"nameRef",class:"col",modelValue:g.value.employee.name,"onUpdate:modelValue":p[1]||(p[1]=$=>g.value.employee.name=$)},{append:l(()=>[e(D,{name:"close",onClick:p[0]||(p[0]=$=>g.value.employee.name=""),class:"cursor-pointer"})]),_:1},8,["modelValue"]),e(W,{outlined:"",label:"NUIT",dense:"",ref:"nuitRef",class:"col q-ml-md",modelValue:g.value.employee.nuit,"onUpdate:modelValue":p[3]||(p[3]=$=>g.value.employee.nuit=$)},{append:l(()=>[e(D,{name:"close",onClick:p[2]||(p[2]=$=>g.value.employee.nuit=""),class:"cursor-pointer"})]),_:1},8,["modelValue"]),e(W,{outlined:"",label:"Utilizador",dense:"",ref:"nuitRef",class:"col q-ml-md",modelValue:g.value.username,"onUpdate:modelValue":p[5]||(p[5]=$=>g.value.username=$)},{append:l(()=>[e(D,{name:"close",onClick:p[4]||(p[4]=$=>g.value.username=""),class:"cursor-pointer"})]),_:1},8,["modelValue"]),e(Ee),e(h,{onClick:i,class:"q-ml-md q-mb-xs float-right",square:"",color:"primary",icon:"search"},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>p[12]||(p[12]=[A("Pesquisar")])),_:1})]),_:1}),e(h,{onClick:q,class:"q-ml-md q-mb-xs float-right",square:"",color:"amber",icon:"clear"},{default:l(()=>[e(T,{class:"bg-amber-5"},{default:l(()=>p[13]||(p[13]=[A("Limpar")])),_:1})]),_:1})]),n("div",Eo,[n("div",Oo,[e(D,{name:"search",size:"sm"}),p[14]||(p[14]=n("span",{class:"q-pl-sm text-subtitle2"},"Resultado da Pesquisa",-1))]),e(fe,{color:"grey-13",size:"1px"})]),n("div",null,[e(qe,{class:"col",dense:"",rows:m.value,columns:N,"row-key":"id",pagination:z.value,"onUpdate:pagination":p[6]||(p[6]=$=>z.value=$),loading:_.value,onRequest:o},{"no-data":l(({icon:$,filter:ee})=>[n("div",Do,[p[15]||(p[15]=n("span",null," Sem resultados para visualizar ",-1)),e(D,{size:"2em",name:ee?"filter_b_and_w":$},null,8,["name"])])]),body:l($=>[e(ke,{props:$},{default:l(()=>[e(Y,{key:"name",props:$},{default:l(()=>[A(X($.row.employee.name),1)]),_:2},1032,["props"]),e(Y,{key:"nuit",props:$},{default:l(()=>[A(X($.row.employee.nuit),1)]),_:2},1032,["props"]),e(Y,{key:"healthFacility",props:$},{default:l(()=>[A(X($.row.employee.partner.name),1)]),_:2},1032,["props"]),e(Y,{key:"username",props:$},{default:l(()=>[A(X($.row.username),1)]),_:2},1032,["props"]),e(Y,{key:"options",props:$},{default:l(()=>[n("div",Io,[e(h,{flat:"",round:"",class:"q-ml-md",color:"grey-7",icon:"lock",onClick:ee=>j($.row)},{default:l(()=>[e(T,{class:"bg-grey-7"},{default:l(()=>p[16]||(p[16]=[A("Redefini\xE7\xE3o de senha")])),_:1})]),_:2},1032,["onClick"]),$.row.lifeCycleStatus=="INACTIVE"||$.row.lifeCycleStatus=="DELETED"?(d(),G(h,{key:0,round:"",dense:"",size:"sm",class:"q-ml-md",color:"red-5",onClick:ee=>b($.row.id)},{default:l(()=>[e(T,{class:"grey-8"},{default:l(()=>p[17]||(p[17]=[A("Inactivo")])),_:1})]),_:2},1032,["onClick"])):B("",!0),$.row.lifeCycleStatus=="ACTIVE"?(d(),G(h,{key:1,round:"",dense:"",size:"sm",class:"q-ml-md",color:"green-5",onClick:ee=>b($.row.id)},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>p[18]||(p[18]=[A("Activo")])),_:1})]),_:2},1032,["onClick"])):B("",!0),e(h,{flat:"",round:"",size:"sm",class:"q-ml-md",color:"yellow-8",icon:"edit",onClick:ee=>E($.row)},{default:l(()=>[e(T,{class:"bg-green-5"},{default:l(()=>p[19]||(p[19]=[A("Detalhar/Editar")])),_:1})]),_:2},1032,["onClick"]),e(h,{flat:"",round:"",class:"q-ml-md",color:"red-8",icon:"delete",onClick:ee=>k($.row.id)},{default:l(()=>[e(T,{class:"bg-red-5"},{default:l(()=>p[20]||(p[20]=[A("Exluir")])),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","loading"])]),n("div",To,[e(De,{modelValue:z.value.page,"onUpdate:modelValue":p[7]||(p[7]=$=>z.value.page=$),max:z.value.rowsNumber,"boundary-numbers":"","direction-links":"",color:"primary"},null,8,["modelValue","max"])]),e($e,{position:"bottom-right",offset:[20,30],class:"row"},{default:l(()=>[e(Ce,{modelValue:V.fabRight,"onUpdate:modelValue":p[8]||(p[8]=$=>V.fabRight=$),"vertical-actions-align":"right",color:"primary",glossy:"",icon:"add",direction:"left",onClick:p[9]||(p[9]=$=>V.$emit("create"))},null,8,["modelValue"])]),_:1})]))]),e(Ol,{persistent:"",modelValue:J.value,"onUpdate:modelValue":p[11]||(p[11]=$=>J.value=$)},{default:l(()=>[e(sl,{onClose:p[10]||(p[10]=$=>J.value=!1)})]),_:1},8,["modelValue"])]),_:1}))}},Go={class:"q-ma-md page-container"},Lo={class:"q-ma-md"},Ho={class:"page-input-container q-pa-md"},Bo={class:"q-mt-lg"},jo={class:"row items-center q-mb-md"},Jo={class:"row q-my-sm"},Mo={class:"q-mt-lg"},Ko={class:"row items-center q-mb-md"},Wo={class:"row q-my-sm"},Yo={class:"row q-my-sm"},Xo={class:"row q-my-sm"},Zo={__name:"PasswordReset",emits:["cancel","close"],setup(s,{emit:I}){const r=c(new oe({employee:new Re({locations:[{location:new he}]})})),g=I,{createDTOFromUser:R}=Oe(),{alertSucess:v,alertError:C}=pe(),m=c(""),y=c(null),z=c(null),_=c(null),J=c(null),N=we("selectedUser");if(!N)throw new Error("selectedUser not provided");const L=()=>{r.value=Object.assign({},N==null?void 0:N.value),m.value=r.value.employee.partner.name==="MISAU"?"SNS":"ONG",r.value.shouldResetPassword=!0};ce(()=>{L()});const Q=c(null),E=()=>{if(r.value.password!=r.value.confirmPassword){C("As senhas inseridas n\xE3o coincidem, corrija as senhas!");return}if(_.value.validate(),J.value.validate(),!_.value.hasError&&!J.value.hasError){Pe.show({spinner:Me});const j=Object.assign({},r.value);ie.resetPassword(R(new oe(j))).then(b=>{b.status===200||b.status===201?v("Password actualizada.").then(()=>{g("cancel")}):C(b==null?void 0:b.message),Pe.hide()}).catch(b=>{Pe.hide(),console.error("Error",b)})}};return(j,b)=>(d(),S("div",null,[n("div",Go,[n("form",{ref_key:"myForm",ref:Q},[n("div",Lo,[e(ol,{dense:"","inline-actions":"",class:"text-white bg-primary q-px-md"},{action:l(()=>[e(ll,{src:al})]),default:l(()=>[b[15]||(b[15]=A(" Dados do User "))]),_:1}),n("div",Ho,[n("div",Bo,[n("div",jo,[e(D,{name:"person_outline",size:"sm"}),b[16]||(b[16]=n("span",{class:"q-pl-sm text-subtitle2"},"Identifica\xE7\xE3o do User",-1))]),e(fe,{color:"grey-13",size:"1px"})]),n("div",Jo,[e(W,{outlined:"",disable:"",label:"Nome",dense:"",ref_key:"nameRef",ref:y,rules:[k=>!!k||"Por favor indicar o nome"],"lazy-rules":"",class:"col",modelValue:r.value.employee.name,"onUpdate:modelValue":[b[1]||(b[1]=k=>r.value.employee.name=k),b[2]||(b[2]=k=>j.filter=k)]},{append:l(()=>[e(D,{name:"close",onClick:b[0]||(b[0]=k=>r.value.employee.name=""),class:"cursor-pointer"})]),_:1},8,["rules","modelValue"]),e(W,{outlined:"",disable:"",label:"Apelido",dense:"",rules:[k=>!!k||"Por favor indicar o apelido"],"lazy-rules":"",ref_key:"surnameRef",ref:z,class:"col q-ml-md",modelValue:r.value.employee.surname,"onUpdate:modelValue":[b[4]||(b[4]=k=>r.value.employee.surname=k),b[5]||(b[5]=k=>j.filter=k)]},{append:l(()=>[e(D,{name:"close",onClick:b[3]||(b[3]=k=>r.value.employee.surname=""),class:"cursor-pointer"})]),_:1},8,["rules","modelValue"])]),n("div",Mo,[n("div",Ko,[e(D,{name:"lock_outline",size:"sm"}),b[17]||(b[17]=n("span",{class:"q-pl-sm text-subtitle2"},"Credenciais",-1))]),e(fe,{color:"grey-13",size:"1px"})]),n("div",Wo,[e(W,{outlined:"",label:"Password",type:"password",dense:"",ref_key:"passwordRef",ref:_,rules:[k=>!!k||"Por favor indicar a password"],"lazy-rules":"",class:"col",modelValue:r.value.password,"onUpdate:modelValue":[b[7]||(b[7]=k=>r.value.password=k),b[8]||(b[8]=k=>j.filter=k)]},{append:l(()=>[e(D,{name:"close",onClick:b[6]||(b[6]=k=>r.value.password=""),class:"cursor-pointer"})]),_:1},8,["rules","modelValue"]),e(W,{outlined:"",label:"Confirma a Password",type:"password",dense:"",rules:[k=>!!k||"Por favor confirma a password"],"lazy-rules":"",ref_key:"confirmPasswordRef",ref:J,class:"col q-ml-md",modelValue:r.value.confirmPassword,"onUpdate:modelValue":[b[10]||(b[10]=k=>r.value.confirmPassword=k),b[11]||(b[11]=k=>j.filter=k)]},{append:l(()=>[e(D,{name:"close",onClick:b[9]||(b[9]=k=>r.value.confirmPassword=""),class:"cursor-pointer"})]),_:1},8,["rules","modelValue"])]),n("div",Yo,[e(Dl,{class:"col",modelValue:r.value.shouldResetPassword,"onUpdate:modelValue":b[12]||(b[12]=k=>r.value.shouldResetPassword=k),label:"Deve redefinir password no pr\xF3ximo login"},null,8,["modelValue"])]),n("div",Xo,[e(Ee),e(h,{label:"Cancelar",class:"float-right",color:"red",onClick:b[13]||(b[13]=k=>j.$emit("cancel"))}),e(h,{class:"float-right q-ml-md",type:"submit",label:"Submeter",color:"primary",onClick:b[14]||(b[14]=k=>E())})])])])],512)])]))}};const et={class:"q-mx-md"},lt={style:{height:"100%"}},qt={__name:"Settings",setup(s){const{closeLoading:I,showloading:r}=Je(),g=c(null),R=c(null),v={page:0,size:10},C={page:0,size:100};ce(()=>{r(),m()});const m=()=>{de.getAll().then(o=>{y("programs")}),ve.getAll(),me.getAll(),Xe.getAll(),ue.getAll(C),ne.getAll(v),ae.getAll(),tl.getAll(),I()},y=o=>{g.value=o},z=o=>{R.value=o},_=x(()=>g.value==="programs"),J=x(()=>g.value==="programmaticArea"),N=x(()=>g.value==="healthFacility"),L=x(()=>g.value==="professionalCategory"),Q=x(()=>g.value==="question"),E=x(()=>g.value==="partner"),j=x(()=>g.value==="user"),b=x(()=>g.value==="userForm"),k=x(()=>g.value==="userEdit"),q=x(()=>g.value==="passwordReset");return Ne("step",g),Ne("selectedUser",R),(o,a)=>(d(),S(xe,null,[n("div",et,[n("ul",null,[n("li",null,[n("a",{onClick:a[0]||(a[0]=i=>y("programs")),class:be({selected:g.value==="programs"})},"Programas",2)]),n("li",null,[n("a",{onClick:a[1]||(a[1]=i=>y("programmaticArea")),class:be({selected:g.value==="programmaticArea"})},"\xC1reas de Mentoria",2)]),n("li",null,[n("a",{onClick:a[2]||(a[2]=i=>y("professionalCategory")),class:be({selected:g.value==="professionalCategory"})},"Categorias Profissionais",2)]),n("li",null,[n("a",{onClick:a[3]||(a[3]=i=>y("question")),class:be({selected:g.value==="question"})},"Compet\xEAncias",2)]),n("li",null,[n("a",{onClick:a[4]||(a[4]=i=>y("healthFacility")),class:be({selected:g.value==="healthFacility"})},"Unidades Sanit\xE1rias",2)]),n("li",null,[n("a",{onClick:a[5]||(a[5]=i=>y("partner")),class:be({selected:g.value==="partner"})},"Institui\xE7\xF5es",2)]),n("li",null,[n("a",{onClick:a[6]||(a[6]=i=>y("user")),class:be({selected:g.value==="user"})},"Utilizadores",2)])])]),n("div",lt,[_.value?(d(),G(Wl,{key:0})):B("",!0),Q.value?(d(),G(da,{key:1})):B("",!0),J.value?(d(),G(Va,{key:2})):B("",!0),L.value?(d(),G(Ea,{key:3})):B("",!0),N.value?(d(),G(Ma,{key:4})):B("",!0),E.value?(d(),G(so,{key:5})):B("",!0),j.value?(d(),G(Qo,{key:6,onCreate:a[7]||(a[7]=i=>y("userForm")),onResetPassword:a[8]||(a[8]=i=>y("passwordReset")),onSelectUser:z,onEditUser:a[9]||(a[9]=i=>y("userEdit"))})):B("",!0),b.value||k.value?(d(),G(sl,{key:7,onCancel:a[10]||(a[10]=i=>y("user"))})):B("",!0),q.value?(d(),G(Zo,{key:8,onCancel:a[11]||(a[11]=i=>y("user"))})):B("",!0)])],64))}};export{qt as default};
