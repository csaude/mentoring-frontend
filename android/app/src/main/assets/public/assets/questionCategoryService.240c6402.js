var l=Object.defineProperty;var m=(t,e,r)=>e in t?l(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var s=(t,e,r)=>(m(t,typeof e!="symbol"?e+"":e,r),r);import{M as y,c as h,d as o}from"./index.806c5219.js";class n extends y{static fields(){return{id:this.attr(null),uuid:this.attr(""),category:this.attr("")}}}s(n,"entity","questions_categories"),s(n,"primaryKey","id"),s(n,"piniaOptions",{persist:!0});class c extends y{static fields(){return{id:this.number(()=>0),uuid:this.attr(""),code:this.attr(""),question:this.attr(""),question_category_id:this.attr(""),questionCategory:this.belongsTo(n,"question_category_id")}}}s(c,"entity","questions"),s(c,"primaryKey","id"),s(c,"piniaOptions",{persist:!0});function g(){function t(r){return new n({id:r.id,uuid:r.uuid,category:r.category})}function e(r){return{id:r.id,uuid:r.uuid,category:r.category}}return{createQuestionCategoryFromDTO:t,createDTOFromQuestionCategory:e}}function p(){function t(r){const{createQuestionCategoryFromDTO:u}=g();return new c({id:r.id,uuid:r.uuid,code:r.code,question:r.question,questionCategory:u(r.questionCategory)})}function e(r){const{createDTOFromQuestionCategory:u}=g();return{id:r.id,uuid:r.uuid,code:r.code,description:r.description,questionCategoryDTO:u(r.questionCategory)}}return{createQuestionFromDTO:t,createDTOFromQuestion:e}}const a=h(c),{createQuestionFromDTO:i}=p();var w={async search(t){return await o().get(`/questions/search?${new URLSearchParams(t).toString()}`).then(e=>(this.generateEntityFromDTO(e.data.content),e)).catch(e=>{console.error("Error",e.message)})},async getAll(t){return await o().get(`/questions/getByPageAndSize?${new URLSearchParams(t).toString()}`).then(e=>(this.generateAndSaveEntityFromDTO(e.data.content),e)).catch(e=>{console.error("Error",e.message)})},generateAndSaveEntityFromDTO(t){t.forEach(e=>{const r=i(e);a.save(r)})},generateEntityFromDTO(t){const e=[];return t.forEach(r=>{e.push(i(r))}),e},deleteAllFromStorage(){a.flush()},piniaGetAll(){return a.query().withAllRecursive(2).orderBy("description","asc").get()},getByName(t){return a.query().where("question",t).orderBy("question","asc").first()},async saveQuestion(t){return await o().post("/questions/save",t).then(e=>(a.save(i(e.data)),e)).catch(e=>{console.error("Error",e.message)})},async deleteQuestion(t){try{const e=await o().patch(`/questions/${t}`);return await o().delete(`/questions/${t}`),a.save(i(e.data)),a.delete(t),e}catch(e){throw console.error("Error",e.message),e}},async updateQuestion(t){return console.log(t),await o().patch("/questions/update",t).then(e=>(a.save(i(e.data)),e)).catch(e=>{console.error("Error",e.message)})}};const d=h(n),{createQuestionCategoryFromDTO:q}=g();var E={async getAll(){return await o().get("/questionCategories/getAll").then(t=>(this.generateAndSaveEntityFromDTO(t.data),t)).catch(t=>{console.error("Error",t.message)})},generateAndSaveEntityFromDTO(t){t.forEach(e=>{const r=q(e);d.save(r)})},deleteAllFromStorage(){d.flush()},piniaGetAll(){return d.query().orderBy("category","asc").get()},getByName(t){return d.query().where("category",t).orderBy("category","asc").first()}};export{c as Q,n as a,w as b,E as q,p as u};
