var v=Object.defineProperty;var w=(t,e,r)=>e in t?v(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var s=(t,e,r)=>(w(t,typeof e!="symbol"?e+"":e,r),r);import{M as f,c as T,d as l}from"./index.806c5219.js";import{E as A,a as h}from"./QSpinnerRings.4e4bdf31.js";import{P as D,u as p}from"./programmaticAreaService.1f7a5697.js";class m extends f{static fields(){return{id:this.attr(null),uuid:this.attr(""),salt:this.attr(""),mentor_id:this.attr(""),programmatic_area_id:this.attr(""),lifeCycleStatus:this.attr(""),mentor:this.belongsTo(u,"mentor_id"),programmaticArea:this.belongsTo(D,"programmatic_area_id")}}}s(m,"entity","tutorProgrammaticAreas"),s(m,"primaryKey","id"),s(m,"piniaOptions",{persist:!0});class u extends f{static fields(){return{id:this.attr(null),uuid:this.attr(""),employee_id:this.attr(""),perfil:this.attr(""),nivel_de_acesso:this.attr(""),employee:this.belongsTo(A,"employee_id"),tutorProgrammaticAreas:this.hasMany(m,"mentor_id")}}}s(u,"entity","mentores"),s(u,"primaryKey","id"),s(u,"piniaOptions",{persist:!0});function y(){function t(r,a){const{createProgrammaticAreaFromDTO:i}=p(),o=[];return r&&r.forEach(c=>{o.push(new m({id:c.id,uuid:c.uuid,mentor_id:a.id,lifeCycleStatus:c.lifeCycleStatus,programmaticArea:i(c.programmaticAreaDTO)}))}),o}function e(r){const{createDTOFromProgrammaticArea:a}=p();return{id:r.id,uuid:r.uuid,mentorId:r.mentor!==null?r.mentor.id:null,programmaticAreaDTO:a(r.programmaticArea),lifeCycleStatus:r.lifeCycleStatus}}return{createTutorProgrammaticAreaFromDTO:t,createDTOFromTutorProgrammaticArea:e}}function O(){function t(a){const{createEmployeeFromDTO:i}=h(),{createTutorProgrammaticAreaFromDTO:o}=y();return new u({id:a.id,uuid:a.uuid,employee:i(a.employeeDTO),tutorProgrammaticAreas:o(a.tutorProgrammaticAreaDTOS,a)})}function e(a){const{createDTOFromEmployee:i}=h();return{id:a.id,uuid:a.uuid,employeeDTO:i(a.employee),tutorProgrammaticAreaDTOS:r(a.tutorProgrammaticAreas)}}function r(a){const{createDTOFromTutorProgrammaticArea:i}=y(),o=[];return a.forEach(c=>{o.push(i(c))}),o}return{createMentorFromDTO:t,createDTOFromMentor:e}}const n=T(u),{createMentorFromDTO:d}=O();var E={async search(t){return await l().get(`/mentor/search?${new URLSearchParams(t).toString()}`).then(e=>(this.generateAndSaveMentorsFromDTO(e.data),e)).catch(e=>{console.error("Error",e.message)})},async save(t){return await l().post("/mentor/save",t).then(e=>(n.save(d(e.data)),e)).catch(e=>e)},async update(t){return await l().patch("/mentor/update",t).then(e=>(n.save(d(e.data)),e)).catch(e=>(console.error("Error",e),e))},generateAndSaveMentorsFromDTO(t){t.forEach(e=>{const r=d(e);n.save(r)})},deleteAllFromStorage(){n.flush()},getMentorList(){return n.query().withAllRecursive(3).orderBy("id","asc").get()},getById(t){return n.query().withAllRecursive(2).where("id",t).orderBy("id","asc").first()},getMentorsByHealthFacilityId(t){return console.log(t),n.query().withAllRecursive(3).whereHas("employee",e=>{e.whereHas("locations",r=>{r.where("healthFacility_id",t)})}).get()}};const g=T(A);var M={getById(t){return g.query().withAllRecursive(2).where("id",t).orderBy("id","asc").first()},verifyExistance(t){const e=t.trim(),r=parseInt(e,10);return!!g.query().withAllRecursive(2).where("nuit",r).first()}};export{u as M,m as T,y as a,M as e,E as m,O as u};
